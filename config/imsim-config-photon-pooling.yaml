# This imSim config file performs almost the same function as the base
# imsim-config.yaml and can be used as a template for other input configs.
# The only difference is that it overrides the image and stamp types in order
# to use the photon pooling pipeline.

modules:
    - imsim
template: imsim-config

# Photon pooling requires the following two changes to the base
# imsim-config.yaml, which otherwise performs the rest of the
# configuration.

# LSST_PhotonPoolingImages firstly determine how all objects are to be drawn,
# then batch the FFT and photon objects separately. FFT objects are drawn
# one-by-one first. Each photon batch contains all of the brighter photon
# objects, at 1/nbatch their total flux. Faint objects are drawn in one go after
# being randomly inserted into the photon batches at full flux. Once the photons
# from all the objects in a batch have been generated by the LSST_Photons stamp,
# the image pools and draws them.

# LSST_Photons is a special stamp type that must be used with
# LSST_PhotonPoolingImage. FFT objects are drawn as normal. Photon shooting
# objects are however drawn with a special NullSensor which does nothing,
# leaving photon stamps to be returned with the photons only.

image.type: LSST_PhotonPoolingImage
stamp.type: LSST_Photons
